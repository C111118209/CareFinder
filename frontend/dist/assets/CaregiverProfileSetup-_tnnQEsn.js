import{f as d,l as y,s as f,c as g,a as w,b as e,g as h,h as k,e as m,i,v as n,m as V,t as b,o as x}from"./index-t9rlBETP.js";import{N as _}from"./Navbar-CypzDj8e.js";const N={class:"bg-gray-50 min-h-screen flex flex-col"},P={class:"flex-grow max-w-3xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-10"},U={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},M={class:"p-6 md:p-8 space-y-6"},S={class:"grid md:grid-cols-2 gap-6"},q={class:"input-group"},j={class:"relative"},B={class:"input-group"},C={class:"relative"},D={class:"input-group"},T={class:"relative"},$={class:"input-group"},E={class:"relative"},z={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},A={class:"p-6 md:p-8 space-y-6"},I={class:"input-group"},F={class:"relative max-w-xs"},G={class:"input-group"},H={key:0,class:"bg-red-50 text-red-600 p-4 rounded-lg text-sm flex items-center gap-2"},J={class:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200"},K=["disabled"],R={__name:"CaregiverProfileSetup",setup(L){const t=d({full_name:"",gender:"",phone:"",address:"",bio:"",service_rate:0}),u=d("");d("");const p=d(!1),o=d(!1);y(()=>{v()});const c=async()=>{var a,s,l;u.value="",p.value=!0;try{if(o.value)await f.updateProfile(t.value),alert("檔案更新成功！");else try{await f.createProfile(t.value),alert("檔案建立成功！"),o.value=!0}catch(r){if(((a=r.response)==null?void 0:a.status)===409||r.message.includes("already exists"))await f.updateProfile(t.value),alert("檔案更新成功！"),o.value=!0;else throw r}await v()}catch(r){u.value=((l=(s=r.response)==null?void 0:s.data)==null?void 0:l.error)||r.message||"操作失敗，請稍後再試"}finally{p.value=!1}},v=async()=>{try{const a=await f.getMyProfile();a&&(t.value={full_name:a.full_name||"",gender:a.gender||"",phone:a.phone||"",address:a.address||"",bio:a.bio||"",service_rate:a.service_rate||0},o.value=!0)}catch{o.value=!1}};return(a,s)=>(x(),g("div",null,[w(_),e("div",N,[e("div",P,[s[24]||(s[24]=e("div",{class:"text-center mb-10"},[e("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"建立您的照護者檔案"),e("p",{class:"text-gray-500"},"完善的資料能讓案主更信任您，提高接案成功率。")],-1)),e("form",{onSubmit:h(c,["prevent"]),class:"space-y-8"},[e("div",U,[s[16]||(s[16]=e("div",{class:"px-6 py-4 bg-gray-50 border-b border-gray-100 flex items-center gap-3"},[e("div",{class:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600"},[e("i",{class:"fa-solid fa-user"})]),e("h3",{class:"text-lg font-semibold text-gray-800"},"基本資料")],-1)),e("div",M,[e("div",S,[e("div",q,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[m(" 真實姓名 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",j,[s[7]||(s[7]=e("span",{class:"absolute left-3 top-3 text-gray-400"},[e("i",{class:"fa-solid fa-signature"})],-1)),i(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>t.value.full_name=l),type:"text",required:"",class:"input-field pl-10",placeholder:"請輸入姓名"},null,512),[[n,t.value.full_name]])])]),e("div",B,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"性別",-1)),e("div",C,[s[10]||(s[10]=e("span",{class:"absolute left-3 top-3 text-gray-400"},[e("i",{class:"fa-solid fa-venus-mars"})],-1)),i(e("select",{"onUpdate:modelValue":s[1]||(s[1]=l=>t.value.gender=l),class:"input-field pl-10 appearance-none bg-white"},[...s[9]||(s[9]=[e("option",{value:""},"請選擇",-1),e("option",{value:"male"},"男性",-1),e("option",{value:"female"},"女性",-1),e("option",{value:"other"},"其他",-1)])],512),[[V,t.value.gender]])])]),e("div",D,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[m(" 聯絡電話 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",T,[s[12]||(s[12]=e("span",{class:"absolute left-3 top-3 text-gray-400"},[e("i",{class:"fa-solid fa-phone"})],-1)),i(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>t.value.phone=l),type:"tel",required:"",class:"input-field pl-10",placeholder:"0912345678"},null,512),[[n,t.value.phone]])])]),e("div",$,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[m(" 服務/居住地點 "),e("span",{class:"text-red-500"},"*")],-1)),e("div",E,[s[14]||(s[14]=e("span",{class:"absolute left-3 top-3 text-gray-400"},[e("i",{class:"fa-solid fa-location-dot"})],-1)),i(e("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>t.value.address=l),type:"text",required:"",class:"input-field pl-10",placeholder:"例如：台北市信義區"},null,512),[[n,t.value.address]])])])])])]),e("div",z,[s[21]||(s[21]=e("div",{class:"px-6 py-4 bg-gray-50 border-b border-gray-100 flex items-center gap-3"},[e("div",{class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-600"},[e("i",{class:"fa-solid fa-briefcase"})]),e("h3",{class:"text-lg font-semibold text-gray-800"},"服務詳情")],-1)),e("div",A,[e("div",I,[s[18]||(s[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[m(" 期望時薪 (NT$) "),e("span",{class:"text-red-500"},"*")],-1)),e("div",F,[s[17]||(s[17]=e("span",{class:"absolute left-3 top-3 text-gray-400"},[e("i",{class:"fa-solid fa-sack-dollar"})],-1)),i(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>t.value.service_rate=l),type:"number",required:"",min:"0",step:"10",class:"input-field pl-10",placeholder:"500"},null,512),[[n,t.value.service_rate,void 0,{number:!0}]])])]),e("div",G,[s[19]||(s[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"自我介紹與經驗",-1)),i(e("textarea",{"onUpdate:modelValue":s[5]||(s[5]=l=>t.value.bio=l),rows:"6",class:"input-field resize-y",placeholder:"請詳細描述您的照護經驗、擁有的證照、或是您的服務理念..."},null,512),[[n,t.value.bio]]),s[20]||(s[20]=e("p",{class:"text-xs text-gray-400 mt-1 text-right"},"建議字數：100字以上",-1))])])]),u.value?(x(),g("div",H,[s[22]||(s[22]=e("i",{class:"fa-solid fa-circle-exclamation"},null,-1)),e("span",null,b(u.value),1)])):k("",!0),e("div",J,[e("button",{type:"button",onClick:s[6]||(s[6]=l=>a.$router.back()),class:"px-6 py-2.5 rounded-lg text-gray-700 hover:bg-gray-100 font-medium transition-colors"}," 取消 "),e("button",{type:"submit",disabled:p.value,class:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-2.5 rounded-lg font-medium shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5 flex items-center gap-2"},[s[23]||(s[23]=e("i",{class:"fa-solid fa-save"},null,-1)),e("span",null,b(p.value?"處理中...":o.value?"更新檔案":"儲存檔案"),1)],8,K)])],32)])])]))}};export{R as default};
