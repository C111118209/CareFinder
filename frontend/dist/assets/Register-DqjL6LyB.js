import{u as _,f as r,l as N,k as q,c,a as m,b as t,g as S,h,i as v,v as f,m as C,t as x,e as p,w as y,r as M,j as R,o as b}from"./index-t9rlBETP.js";import{N as B}from"./Navbar-CypzDj8e.js";const U={class:"bg-gray-50 min-h-screen flex items-center justify-center py-12"},j={class:"max-w-md w-full"},D={class:"card"},T={key:0,class:"text-red-600 text-sm"},A=["disabled"],E={class:"mt-6 text-center"},F={class:"text-gray-600"},P={class:"mt-4 text-center"},I={__name:"Register",setup(z){const g=R(),w=q(),k=_(),u=r(""),d=r(""),a=r("user"),i=r(""),n=r(!1);N(()=>{const s=w.query.role;(s==="user"||s==="caregiver")&&(a.value=s)});const V=async()=>{var s,e;i.value="",n.value=!0;try{await k.register(u.value,d.value,a.value),g.push({name:"login",query:{registered:"true"}})}catch(l){i.value=((e=(s=l.response)==null?void 0:s.data)==null?void 0:e.error)||l.message||"註冊失敗，請稍後再試"}finally{n.value=!1}};return(s,e)=>{const l=M("router-link");return b(),c("div",null,[m(B),t("div",U,[t("div",j,[t("div",D,[e[10]||(e[10]=t("div",{class:"text-center mb-6"},[t("h1",{class:"text-3xl font-bold text-primary-600 mb-2"},"CareFinder"),t("h2",{class:"text-2xl font-semibold text-gray-800"},"註冊")],-1)),t("form",{onSubmit:S(V,["prevent"]),class:"space-y-4"},[t("div",null,[e[3]||(e[3]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"},"電子郵件",-1)),v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),type:"email",id:"email",required:"",class:"input-field",placeholder:"your@email.com"},null,512),[[f,u.value]])]),t("div",null,[e[4]||(e[4]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"},"密碼",-1)),v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>d.value=o),type:"password",id:"password",required:"",class:"input-field",placeholder:"••••••••",minlength:"6"},null,512),[[f,d.value]])]),t("div",null,[e[6]||(e[6]=t("label",{for:"role",class:"block text-sm font-medium text-gray-700 mb-1"},"註冊身份",-1)),v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>a.value=o),id:"role",required:"",class:"input-field"},[...e[5]||(e[5]=[t("option",{value:"user"},"使用者/家屬",-1),t("option",{value:"caregiver"},"照護者",-1)])],512),[[C,a.value]])]),i.value?(b(),c("div",T,x(i.value),1)):h("",!0),t("button",{type:"submit",disabled:n.value,class:"w-full btn-primary"},x(n.value?"註冊中...":"註冊"),9,A)],32),t("div",E,[t("p",F,[e[8]||(e[8]=p(" 已經有帳號？ ",-1)),m(l,{to:"/login",class:"text-primary-600 hover:text-primary-700 font-medium"},{default:y(()=>[...e[7]||(e[7]=[p("立即登入",-1)])]),_:1})])]),t("div",P,[m(l,{to:"/",class:"text-gray-500 hover:text-gray-700 text-sm"},{default:y(()=>[...e[9]||(e[9]=[p("返回首頁",-1)])]),_:1})])])])])])}}};export{I as default};
