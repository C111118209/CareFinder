import{u as w,f as v,l as N,k as S,s as T,z as C,c as l,a as D,b as e,h as d,A as L,t as r,n as A,w as B,e as _,F as p,p as y,r as M,o as a}from"./index-t9rlBETP.js";import{N as P}from"./Navbar-CypzDj8e.js";const V={class:"bg-gray-50 min-h-screen"},$={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},F={key:0,class:"text-center py-10"},H={key:1,class:"space-y-6"},I={class:"card"},j={class:"flex justify-between items-start mb-6"},z={class:"text-3xl font-bold text-gray-800 mb-2"},R={class:"flex items-center space-x-4 text-gray-600"},E={key:0},G={key:1},U={key:0,class:"mb-6"},q={class:"text-gray-700 whitespace-pre-line"},J={class:"grid md:grid-cols-2 gap-6"},K={class:"space-y-2 text-gray-700"},Q={key:0},W={key:1},X={key:0},Y={class:"space-y-2"},Z={key:1,class:"mt-6"},O={class:"space-y-2"},ee={class:"font-medium text-green-800"},te={class:"text-sm text-green-600"},se={key:0,class:"text-xs text-green-700 mt-1"},ae={class:"card"},oe={class:"text-2xl font-semibold mb-4"},le={key:0,class:"text-gray-600"},re={key:1,class:"space-y-4"},ne={class:"flex items-center justify-between mb-2"},ie={class:"flex items-center"},de=["innerHTML"],ce={class:"ml-2 text-gray-600"},ue={key:0,class:"text-gray-700 mt-2"},pe={__name:"CaregiverProfile",setup(_e){const f=S(),g=w(),s=v(null),u=v([]),m=v(!1),x=n=>n?new Date(n).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"}):"ç„¡è³‡æ–™",b=n=>n==="male"?"ç”·æ€§":n==="female"?"å¥³æ€§":"æœªæä¾›",h=n=>["","é€±ä¸€","é€±äºŒ","é€±ä¸‰","é€±å››","é€±äº”","é€±å…­","é€±æ—¥"][n]||`é€±${n}`,k=n=>{const t=Math.floor(n),i=n%1>=.5;let o="";for(let c=0;c<t;c++)o+='<span class="text-yellow-400">â˜…</span>';i&&(o+='<span class="text-yellow-400">â˜†</span>');for(let c=t+(i?1:0);c<5;c++)o+='<span class="text-gray-300">â˜…</span>';return o};return N(async()=>{var n,t;m.value=!0;try{const i=f.params.id;s.value=await T.getProfile(i),u.value=await C.getCaregiverReviews(i)}catch(i){console.error("Load error:",i),alert("è¼‰å…¥å¤±æ•—ï¼š"+(((t=(n=i.response)==null?void 0:n.data)==null?void 0:t.error)||i.message))}finally{m.value=!1}}),(n,t)=>{const i=M("router-link");return a(),l("div",null,[D(P),e("div",V,[e("div",$,[m.value?(a(),l("div",F,[...t[0]||(t[0]=[e("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"},null,-1),e("p",{class:"mt-4 text-gray-600"},"è¼‰å…¥ä¸­...",-1)])])):s.value?(a(),l("div",H,[e("div",I,[e("div",j,[e("div",null,[e("h1",z,r(s.value.full_name||"æœªæä¾›å§“å"),1),e("div",R,[e("span",null,"â­ "+r((s.value.avg_rating||0).toFixed(1)),1),s.value.address?(a(),l("span",E,"ðŸ“ "+r(s.value.address),1)):d("",!0),s.value.service_rate?(a(),l("span",G,"ðŸ’° NT$ "+r(s.value.service_rate)+"/å°æ™‚",1)):d("",!0)])]),A(g).isUser?(a(),L(i,{key:0,to:`/create-contract/${s.value.user_id}?profile_id=${s.value.profile_id||""}`,class:"btn-primary inline-block"},{default:B(()=>[...t[1]||(t[1]=[_(" ç™¼èµ·åˆç´„ ",-1)])]),_:1},8,["to"])):d("",!0)]),s.value.bio?(a(),l("div",U,[t[2]||(t[2]=e("h2",{class:"text-xl font-semibold mb-2"},"è‡ªæˆ‘ä»‹ç´¹",-1)),e("p",q,r(s.value.bio),1)])):d("",!0),e("div",J,[e("div",null,[t[6]||(t[6]=e("h2",{class:"text-xl font-semibold mb-3"},"åŸºæœ¬è³‡è¨Š",-1)),e("div",K,[e("p",null,[t[3]||(t[3]=e("span",{class:"font-medium"},"æ€§åˆ¥ï¼š",-1)),_(r(b(s.value.gender)),1)]),s.value.phone?(a(),l("p",Q,[t[4]||(t[4]=e("span",{class:"font-medium"},"é›»è©±ï¼š",-1)),_(r(s.value.phone),1)])):d("",!0),s.value.address?(a(),l("p",W,[t[5]||(t[5]=e("span",{class:"font-medium"},"æœå‹™åœ°é»žï¼š",-1)),_(r(s.value.address),1)])):d("",!0)])]),s.value.availabilities&&s.value.availabilities.length>0?(a(),l("div",X,[t[7]||(t[7]=e("h2",{class:"text-xl font-semibold mb-3"},"å¯æœå‹™æ™‚é–“",-1)),e("div",Y,[(a(!0),l(p,null,y(s.value.availabilities,o=>(a(),l("div",{key:o.availability_id,class:"text-gray-700"},[e("p",null,r(h(o.day_of_week))+" "+r(o.start_time)+" - "+r(o.end_time),1)]))),128))])])):d("",!0)]),s.value.licenses&&s.value.licenses.length>0?(a(),l("div",Z,[t[8]||(t[8]=e("h2",{class:"text-xl font-semibold mb-3"},"è­‰ç…§",-1)),e("div",O,[(a(!0),l(p,null,y(s.value.licenses,o=>(a(),l("div",{key:o.license_id,class:"bg-green-50 border border-green-200 rounded-lg p-3"},[e("p",ee,r(o.name),1),e("p",te,"æœ‰æ•ˆæœŸè‡³ï¼š"+r(x(o.expiry_date)),1),o.status==="approved"?(a(),l("p",se," âœ… å·²èªè­‰ ")):d("",!0)]))),128))])])):d("",!0)]),e("div",ae,[e("h2",oe,"è©•åƒ¹ ("+r(u.value.length)+")",1),u.value.length===0?(a(),l("div",le,"å°šç„¡è©•åƒ¹")):(a(),l("div",re,[(a(!0),l(p,null,y(u.value,o=>(a(),l("div",{key:o.review_id,class:"border-b border-gray-200 pb-4 last:border-0"},[e("div",ne,[e("div",ie,[e("span",{innerHTML:k(o.rating)},null,8,de),e("span",ce,r(x(o.created_at)),1)])]),o.comment?(a(),l("p",ue,r(o.comment),1)):d("",!0)]))),128))]))])])):d("",!0)])])])}}};export{pe as default};
