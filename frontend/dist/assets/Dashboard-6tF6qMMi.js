import{u as B,f as v,l as L,j as z,c as r,a as n,b as t,h as R,n as x,t as o,w as c,r as F,F as D,p as $,q as I,s as E,o as i,e as b,x as U}from"./index-t9rlBETP.js";import{N as W}from"./Navbar-CypzDj8e.js";const G={class:"bg-gray-50 min-h-screen"},H={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},J={key:0},K={class:"mb-8"},O={class:"flex items-center justify-between mb-4"},Q={class:"text-3xl font-bold text-gray-800"},X={key:0,class:"w-16 h-16 rounded-full overflow-hidden border-4 border-white shadow-lg"},Y=["src"],Z={key:1,class:"w-16 h-16 rounded-full bg-primary-100 flex items-center justify-center border-4 border-white shadow-lg"},tt={class:"text-2xl text-primary-600 font-bold"},et={class:"mb-8"},st={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},lt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},ot={class:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white"},rt={class:"flex items-center justify-between"},it={class:"text-3xl font-bold"},dt={class:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white"},at={class:"flex items-center justify-between"},nt={class:"text-3xl font-bold"},xt={class:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white"},ct={class:"flex items-center justify-between"},ut={class:"text-3xl font-bold"},gt={class:"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden"},mt={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},bt={key:0,class:"p-8 text-center"},pt={key:1,class:"p-8 text-center text-gray-500"},ft={key:2,class:"divide-y divide-gray-200"},vt=["onClick"],yt={class:"flex items-center justify-between"},ht={class:"flex-1"},wt={class:"flex items-center space-x-3 mb-2"},_t={class:"font-semibold text-gray-800"},kt={class:"text-sm text-gray-600"},Ct={key:1},jt={class:"mb-8"},Nt={class:"flex items-center justify-between mb-4"},Pt={key:0,class:"w-16 h-16 rounded-full overflow-hidden border-4 border-white shadow-lg"},Rt=["src"],Dt={key:1,class:"w-16 h-16 rounded-full bg-primary-100 flex items-center justify-center border-4 border-white shadow-lg"},$t={class:"text-2xl text-primary-600 font-bold"},Ut={class:"mb-8"},St={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},At={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Mt={class:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white"},Tt={class:"flex items-center justify-between"},Vt={class:"text-3xl font-bold"},qt={class:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white"},Bt={class:"flex items-center justify-between"},Lt={class:"text-3xl font-bold"},zt={class:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl shadow-lg p-6 text-white"},Ft={class:"flex items-center justify-between"},It={class:"text-3xl font-bold"},Et={class:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white"},Wt={class:"flex items-center justify-between"},Gt={class:"text-3xl font-bold"},Ht={key:0,class:"bg-white rounded-xl shadow-md border border-gray-200 p-6 mb-8"},Jt={class:"flex items-center justify-between"},Kt={class:"flex items-center space-x-4"},Ot={class:"text-sm text-gray-600"},Qt={key:1,class:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 mb-8"},Xt={class:"flex items-center space-x-4"},Yt={class:"flex-1"},Zt={class:"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden"},te={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},ee={key:0,class:"p-8 text-center"},se={key:1,class:"p-8 text-center text-gray-500"},le={key:2,class:"divide-y divide-gray-200"},oe=["onClick"],re={class:"flex items-center justify-between"},ie={class:"flex-1"},de={class:"flex items-center space-x-3 mb-2"},ae={class:"font-semibold text-gray-800"},ne={class:"text-sm text-gray-600"},ge={__name:"Dashboard",setup(xe){const S=z(),a=B(),u=v({activeContracts:0,completedContracts:0,pendingContracts:0}),g=v({hasProfile:!1,fullName:"",serviceRate:0,avgRating:0}),m=v([]),p=v(!1),f=s=>s?new Date(s).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}):"無資料",y=s=>({pending:"待確認",active:"進行中",completed:"已完成",canceled:"已取消"})[s]||s,A=s=>{const e=s.Caregiver||s.caregiver||{};return e.nickname||e.email||"照護者"},M=s=>{const e=s.User||s.user||{};return e.nickname||e.email||"使用者"},T=async()=>{p.value=!0;try{const s=await I.getContracts();u.value={activeContracts:s.filter(e=>e.status==="active").length,completedContracts:s.filter(e=>e.status==="completed").length,pendingContracts:s.filter(e=>e.status==="pending").length},m.value=s.sort((e,d)=>new Date(d.created_at||d.start_date)-new Date(e.created_at||e.start_date)).slice(0,5)}catch(s){console.error("Load contracts error:",s)}finally{p.value=!1}},V=async()=>{try{const s=await E.getMyProfile();s&&(g.value={hasProfile:!0,fullName:s.full_name||"",serviceRate:s.service_rate||0,avgRating:s.avg_rating||0})}catch{g.value.hasProfile=!1}};return L(()=>{if(a.isAdmin){S.push("/admin");return}T(),a.isCaregiver&&V()}),(s,e)=>{var h,w,_,k,C,j,N,P;const d=F("router-link");return i(),r("div",null,[n(W),t("div",G,[t("div",H,[x(a).isUser?(i(),r("div",J,[t("div",K,[t("div",O,[t("div",null,[t("h2",Q," 歡迎回來，"+o(((h=x(a).user)==null?void 0:h.nickname)||((w=x(a).user)==null?void 0:w.email)||"使用者")+"！ ",1),e[0]||(e[0]=t("p",{class:"text-gray-600 mt-1"},"以下是您的服務概覽",-1))]),(_=x(a).user)!=null&&_.avatar_url?(i(),r("div",X,[t("img",{src:x(a).user.avatar_url,alt:"頭像",class:"w-full h-full object-cover"},null,8,Y)])):(i(),r("div",Z,[t("span",tt,o((((k=x(a).user)==null?void 0:k.nickname)||((C=x(a).user)==null?void 0:C.email)||"U")[0].toUpperCase()),1)]))])]),t("div",et,[e[4]||(e[4]=t("h3",{class:"text-xl font-semibold text-gray-800 mb-4"},"快速操作",-1)),t("div",st,[n(d,{to:"/caregiver-search",class:"group bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-4 border border-gray-200 hover:border-primary-300"},{default:c(()=>[...e[1]||(e[1]=[t("div",{class:"flex flex-col md:flex-row items-center md:space-x-4 text-center md:text-left"},[t("div",{class:"bg-blue-100 group-hover:bg-blue-200 rounded-lg p-3 transition-colors mb-2 md:mb-0"},[t("i",{class:"fa-solid fa-search text-blue-600 text-xl"})]),t("div",null,[t("h4",{class:"font-semibold text-gray-800 group-hover:text-primary-600 transition-colors"}," 搜尋照護者 "),t("p",{class:"text-xs md:text-sm text-gray-600 hidden md:block"}," 尋找合適的照護服務 ")])],-1)])]),_:1}),n(d,{to:"/contracts",class:"group bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-4 border border-gray-200 hover:border-primary-300"},{default:c(()=>[...e[2]||(e[2]=[t("div",{class:"flex flex-col md:flex-row items-center md:space-x-4 text-center md:text-left"},[t("div",{class:"bg-green-100 group-hover:bg-green-200 rounded-lg p-3 transition-colors mb-2 md:mb-0"},[t("i",{class:"fa-solid fa-file-contract text-green-600 text-xl"})]),t("div",null,[t("h4",{class:"font-semibold text-gray-800 group-hover:text-primary-600 transition-colors"}," 我的合約 "),t("p",{class:"text-xs md:text-sm text-gray-600 hidden md:block"}," 查看和管理合約 ")])],-1)])]),_:1}),n(d,{to:"/profile",class:"group bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-4 border border-gray-200 hover:border-primary-300"},{default:c(()=>[...e[3]||(e[3]=[t("div",{class:"flex flex-col md:flex-row items-center md:space-x-4 text-center md:text-left"},[t("div",{class:"bg-purple-100 group-hover:bg-purple-200 rounded-lg p-3 transition-colors mb-2 md:mb-0"},[t("i",{class:"fa-solid fa-user text-purple-600 text-xl"})]),t("div",null,[t("h4",{class:"font-semibold text-gray-800 group-hover:text-primary-600 transition-colors"}," 個人資料 "),t("p",{class:"text-xs md:text-sm text-gray-600 hidden md:block"}," 管理您的帳號設定 ")])],-1)])]),_:1})])]),t("div",lt,[t("div",ot,[t("div",rt,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-blue-100 text-sm mb-1"},"進行中的合約",-1)),t("p",it,o(u.value.activeContracts||0),1)]),e[6]||(e[6]=t("div",{class:"bg-white/20 rounded-full p-3"},[t("i",{class:"fa-solid fa-file-contract text-2xl"})],-1))])]),t("div",dt,[t("div",at,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-green-100 text-sm mb-1"},"已完成的合約",-1)),t("p",nt,o(u.value.completedContracts||0),1)]),e[8]||(e[8]=t("div",{class:"bg-white/20 rounded-full p-3"},[t("i",{class:"fa-solid fa-check-circle text-2xl"})],-1))])]),t("div",xt,[t("div",ct,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-purple-100 text-sm mb-1"},"待處理的合約",-1)),t("p",ut,o(u.value.pendingContracts||0),1)]),e[10]||(e[10]=t("div",{class:"bg-white/20 rounded-full p-3"},[t("i",{class:"fa-solid fa-clock text-2xl"})],-1))])])]),t("div",gt,[t("div",mt,[e[12]||(e[12]=t("h3",{class:"text-xl font-semibold text-gray-800"},"最近的合約",-1)),n(d,{to:"/contracts",class:"text-sm text-primary-600 hover:text-primary-700 font-medium"},{default:c(()=>[...e[11]||(e[11]=[b(" 查看全部 → ",-1)])]),_:1})]),p.value?(i(),r("div",bt,[...e[13]||(e[13]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),t("p",{class:"mt-2 text-gray-600"},"載入中...",-1)])])):m.value.length===0?(i(),r("div",pt,[e[15]||(e[15]=t("i",{class:"fa-solid fa-file-circle-question text-4xl mb-3 opacity-50"},null,-1)),e[16]||(e[16]=t("p",null,"目前沒有合約",-1)),n(d,{to:"/caregiver-search",class:"text-primary-600 hover:text-primary-700 mt-2 inline-block"},{default:c(()=>[...e[14]||(e[14]=[b(" 開始搜尋照護者 → ",-1)])]),_:1})])):(i(),r("div",ft,[(i(!0),r(D,null,$(m.value,l=>(i(),r("div",{key:l.contract_id,class:"p-6 hover:bg-gray-50 transition-colors cursor-pointer",onClick:q=>s.$router.push(`/contract/${l.contract_id}`)},[t("div",yt,[t("div",ht,[t("div",wt,[t("h4",_t," 合約 #"+o(l.contract_id),1),t("span",{class:U([{"bg-yellow-100 text-yellow-800":l.status==="pending","bg-green-100 text-green-800":l.status==="active","bg-blue-100 text-blue-800":l.status==="completed","bg-red-100 text-red-800":l.status==="canceled"},"px-2 py-1 rounded-full text-xs font-medium"])},o(y(l.status)),3)]),t("p",kt,o(A(l))+" · "+o(f(l.start_date))+" - "+o(f(l.end_date)),1)]),e[17]||(e[17]=t("i",{class:"fa-solid fa-chevron-right text-gray-400"},null,-1))])],8,vt))),128))]))])])):R("",!0),x(a).isCaregiver?(i(),r("div",Ct,[t("div",jt,[t("div",Nt,[e[18]||(e[18]=t("div",null,[t("h2",{class:"text-3xl font-bold text-gray-800"},"照護者儀表板"),t("p",{class:"text-gray-600 mt-1"},"管理您的照護服務")],-1)),(j=x(a).user)!=null&&j.avatar_url?(i(),r("div",Pt,[t("img",{src:x(a).user.avatar_url,alt:"頭像",class:"w-full h-full object-cover"},null,8,Rt)])):(i(),r("div",Dt,[t("span",$t,o((((N=x(a).user)==null?void 0:N.nickname)||((P=x(a).user)==null?void 0:P.email)||"C")[0].toUpperCase()),1)]))])]),t("div",Ut,[e[23]||(e[23]=t("h3",{class:"text-xl font-semibold text-gray-800 mb-4"},"快速操作",-1)),t("div",St,[n(d,{to:"/caregiver-profile-setup",class:"group bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-4 border border-gray-200 hover:border-primary-300"},{default:c(()=>[...e[19]||(e[19]=[t("div",{class:"text-center"},[t("div",{class:"bg-blue-100 group-hover:bg-blue-200 rounded-lg p-3 mb-2 transition-colors inline-block"},[t("i",{class:"fa-solid fa-user-edit text-blue-600 text-xl md:text-2xl"})]),t("h4",{class:"font-semibold text-gray-800 group-hover:text-primary-600 transition-colors mb-1"}," 我的檔案 "),t("p",{class:"text-xs text-gray-600"},"管理個人資料")],-1)])]),_:1}),n(d,{to:"/caregiver-availability",class:"group bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-4 border border-gray-200 hover:border-primary-300"},{default:c(()=>[...e[20]||(e[20]=[t("div",{class:"text-center"},[t("div",{class:"bg-green-100 group-hover:bg-green-200 rounded-lg p-3 mb-2 transition-colors inline-block"},[t("i",{class:"fa-solid fa-calendar-check text-green-600 text-xl md:text-2xl"})]),t("h4",{class:"font-semibold text-gray-800 group-hover:text-primary-600 transition-colors mb-1"}," 服務時間 "),t("p",{class:"text-xs text-gray-600"},"設定可服務時段")],-1)])]),_:1}),n(d,{to:"/caregiver-licenses",class:"group bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-4 border border-gray-200 hover:border-primary-300"},{default:c(()=>[...e[21]||(e[21]=[t("div",{class:"text-center"},[t("div",{class:"bg-yellow-100 group-hover:bg-yellow-200 rounded-lg p-3 mb-2 transition-colors inline-block"},[t("i",{class:"fa-solid fa-certificate text-yellow-600 text-xl md:text-2xl"})]),t("h4",{class:"font-semibold text-gray-800 group-hover:text-primary-600 transition-colors mb-1"}," 證照管理 "),t("p",{class:"text-xs text-gray-600"},"上傳專業證照")],-1)])]),_:1}),n(d,{to:"/contracts",class:"group bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-4 border border-gray-200 hover:border-primary-300"},{default:c(()=>[...e[22]||(e[22]=[t("div",{class:"text-center"},[t("div",{class:"bg-purple-100 group-hover:bg-purple-200 rounded-lg p-3 mb-2 transition-colors inline-block"},[t("i",{class:"fa-solid fa-file-contract text-purple-600 text-xl md:text-2xl"})]),t("h4",{class:"font-semibold text-gray-800 group-hover:text-primary-600 transition-colors mb-1"}," 我的合約 "),t("p",{class:"text-xs text-gray-600"},"查看服務合約")],-1)])]),_:1})])]),t("div",At,[t("div",Mt,[t("div",Tt,[t("div",null,[e[24]||(e[24]=t("p",{class:"text-blue-100 text-sm mb-1"},"進行中的合約",-1)),t("p",Vt,o(u.value.activeContracts||0),1)]),e[25]||(e[25]=t("div",{class:"bg-white/20 rounded-full p-3"},[t("i",{class:"fa-solid fa-file-contract text-2xl"})],-1))])]),t("div",qt,[t("div",Bt,[t("div",null,[e[26]||(e[26]=t("p",{class:"text-green-100 text-sm mb-1"},"已完成",-1)),t("p",Lt,o(u.value.completedContracts||0),1)]),e[27]||(e[27]=t("div",{class:"bg-white/20 rounded-full p-3"},[t("i",{class:"fa-solid fa-check-circle text-2xl"})],-1))])]),t("div",zt,[t("div",Ft,[t("div",null,[e[28]||(e[28]=t("p",{class:"text-yellow-100 text-sm mb-1"},"待接受",-1)),t("p",It,o(u.value.pendingContracts||0),1)]),e[29]||(e[29]=t("div",{class:"bg-white/20 rounded-full p-3"},[t("i",{class:"fa-solid fa-clock text-2xl"})],-1))])]),t("div",Et,[t("div",Wt,[t("div",null,[e[30]||(e[30]=t("p",{class:"text-purple-100 text-sm mb-1"},"平均評分",-1)),t("p",Gt,o(g.value.avgRating||"0.0"),1)]),e[31]||(e[31]=t("div",{class:"bg-white/20 rounded-full p-3"},[t("i",{class:"fa-solid fa-star text-2xl"})],-1))])])]),g.value.hasProfile?(i(),r("div",Ht,[t("div",Jt,[t("div",Kt,[e[33]||(e[33]=t("div",{class:"bg-green-100 rounded-full p-3"},[t("i",{class:"fa-solid fa-check-circle text-green-600 text-xl"})],-1)),t("div",null,[e[32]||(e[32]=t("h4",{class:"font-semibold text-gray-800"},"檔案已完成",-1)),t("p",Ot,o(g.value.fullName)+" · NT$ "+o(g.value.serviceRate)+"/小時 · ⭐ "+o(g.value.avgRating||"0.0"),1)])]),n(d,{to:"/caregiver-profile-setup",class:"text-primary-600 hover:text-primary-700 text-sm font-medium"},{default:c(()=>[...e[34]||(e[34]=[b(" 編輯 → ",-1)])]),_:1})])])):(i(),r("div",Qt,[t("div",Xt,[e[38]||(e[38]=t("div",{class:"bg-yellow-100 rounded-full p-3"},[t("i",{class:"fa-solid fa-exclamation-triangle text-yellow-600 text-xl"})],-1)),t("div",Yt,[e[36]||(e[36]=t("h4",{class:"font-semibold text-gray-800 mb-1"}," 尚未建立照護者檔案 ",-1)),e[37]||(e[37]=t("p",{class:"text-sm text-gray-600 mb-3"}," 完成檔案設定以開始接受服務邀請 ",-1)),n(d,{to:"/caregiver-profile-setup",class:"btn-primary inline-block"},{default:c(()=>[...e[35]||(e[35]=[b(" 立即建立 ",-1)])]),_:1})])])])),t("div",Zt,[t("div",te,[e[40]||(e[40]=t("h3",{class:"text-xl font-semibold text-gray-800"},"最近的合約",-1)),n(d,{to:"/contracts",class:"text-sm text-primary-600 hover:text-primary-700 font-medium"},{default:c(()=>[...e[39]||(e[39]=[b(" 查看全部 → ",-1)])]),_:1})]),p.value?(i(),r("div",ee,[...e[41]||(e[41]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),t("p",{class:"mt-2 text-gray-600"},"載入中...",-1)])])):m.value.length===0?(i(),r("div",se,[...e[42]||(e[42]=[t("i",{class:"fa-solid fa-file-circle-question text-4xl mb-3 opacity-50"},null,-1),t("p",null,"目前沒有合約",-1)])])):(i(),r("div",le,[(i(!0),r(D,null,$(m.value,l=>(i(),r("div",{key:l.contract_id,class:"p-6 hover:bg-gray-50 transition-colors cursor-pointer",onClick:q=>s.$router.push(`/contract/${l.contract_id}`)},[t("div",re,[t("div",ie,[t("div",de,[t("h4",ae," 合約 #"+o(l.contract_id),1),t("span",{class:U([{"bg-yellow-100 text-yellow-800":l.status==="pending","bg-green-100 text-green-800":l.status==="active","bg-blue-100 text-blue-800":l.status==="completed","bg-red-100 text-red-800":l.status==="canceled"},"px-2 py-1 rounded-full text-xs font-medium"])},o(y(l.status)),3)]),t("p",ne,o(M(l))+" · "+o(f(l.start_date))+" - "+o(f(l.end_date)),1)]),e[43]||(e[43]=t("i",{class:"fa-solid fa-chevron-right text-gray-400"},null,-1))])],8,oe))),128))]))])])):R("",!0)])])])}}};export{ge as default};
