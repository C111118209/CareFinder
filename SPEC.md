# å°‹æ‰¾ç…§è­·è€… (CareFinder) - å¹³å°è¦æ ¼

## ğŸ“‹ å¹³å°åŠŸèƒ½è¦æ ¼ (Functional Specifications)

### 1. æ ¸å¿ƒä½¿ç”¨è€…è§’è‰²

- **å¹³å°ç®¡ç†è€… (Admin):**
  - ç®¡ç†æ‰€æœ‰ç”¨æˆ¶ã€ç…§è­·è€…ã€æœå‹™åˆç´„ã€è­‰ç…§å¯©æ ¸ã€‚
  - æŸ¥çœ‹ç³»çµ±ç‡Ÿé‹æ•¸æ“šèˆ‡å ±å‘Šã€‚
  - ç®¡ç†ç¶²ç«™å…§å®¹ï¼ˆä¾‹å¦‚ï¼šå…¬å‘Šã€ä½¿ç”¨æ¢æ¬¾ï¼‰ã€‚

- **ä½¿ç”¨è€…/å®¶å±¬ (User):**
  - è¨»å†Š/ç™»å…¥/ä¿®æ”¹å€‹äººè³‡æ–™ã€‚
  - ç€è¦½ã€æœå°‹ã€ç¯©é¸ç…§è­·è€…ã€‚
  - ç™¼é€æœå‹™éœ€æ±‚æˆ–åˆç´„é‚€è«‹ã€‚
  - ç®¡ç†åˆç´„ï¼ˆç°½è¨‚ã€çºŒç´„ã€å–æ¶ˆï¼‰ã€‚
  - æœå‹™å®Œæˆå¾Œï¼Œå°ç…§è­·è€…é€²è¡Œç•™è¨€èˆ‡è©•åˆ†ã€‚

- **ç…§è­·è€… (Caregiver):**
  - è¨»å†Š/ç™»å…¥/ä¿®æ”¹å€‹äººè³‡æ–™ã€‚
  - å¡«å¯«/æ›´æ–°å€‹äººæª”æ¡ˆ (åŒ…å«ï¼šæœå‹™é …ç›®ã€ç¶“é©—ã€è­‰ç…§ã€æ”¶è²»æ¨™æº–ã€å¯æœå‹™æ™‚é–“æ®µ)ã€‚
  - ä¸Šå‚³è­‰ç…§ä¾›å¹³å°å¯©æ ¸ã€‚
  - æ¥æ”¶ã€æ¥å—æˆ–æ‹’çµ•æœå‹™é‚€è«‹ã€‚
  - ç®¡ç†åˆç´„ï¼ˆç°½è¨‚ã€çºŒç´„ã€å®Œæˆï¼‰ã€‚

### 2. ç…§è­·è€…ç®¡ç† (Caregiver Management)

- **ç…§è­·è€…æª”æ¡ˆ:** åŒ…å«åŸºæœ¬è³‡æ–™ã€è‡ªæˆ‘ä»‹ç´¹ã€æœå‹™é …ç›®ã€æ”¶è²»æ¨™æº–ã€‚
- **è­‰ç…§å¯©æ ¸æ©Ÿåˆ¶:** ç…§è­·è€…ä¸Šå‚³è­‰ç…§ï¼Œå¹³å°ç®¡ç†è€…å¯©æ ¸ï¼ˆé€šé/æ‹’çµ•ï¼‰ã€‚æœªé€šéå¯©æ ¸çš„ç…§è­·è€…ç„¡æ³•è¢«ä½¿ç”¨è€…æœå°‹ã€‚
- **å¯æœå‹™æ™‚é–“æ®µ:** ç…§è­·è€…å¯è¨­å®šæ¯æ—¥æˆ–æ¯é€±çš„ç‰¹å®šæ™‚é–“å€å¡Š (ä¾‹å¦‚ï¼šæ¯é€±ä¸€ 09:00-12:00, 14:00-17:00)ã€‚
- **æœå°‹èˆ‡ç¯©é¸:**
  - ä½¿ç”¨è€…å¯ä¾æ“šåœ°é»ã€æœå‹™é …ç›®ã€è­‰ç…§ã€æ€§åˆ¥ã€å¯æœå‹™æ™‚é–“æ®µã€è©•åˆ†ç­‰æ¢ä»¶é€²è¡Œæœå°‹èˆ‡ç¯©é¸ã€‚

### 3. åˆç´„èˆ‡æœå‹™ç®¡ç† (Contract & Service Management)

- **åˆç´„é€±æœŸ:** æœ€çŸ­ç„¡é™åˆ¶ï¼Œæœ€é•·å…­å€‹æœˆ (180å¤©)ã€‚
- **åˆç´„çºŒç´„:** å¯ä»¥åœ¨åˆç´„çµæŸå‰ (ä¾‹å¦‚ï¼šæå‰ 30 å¤©å…§) ç”±ä½¿ç”¨è€…ç™¼èµ·çºŒç´„ï¼Œç…§è­·è€…åŒæ„å¾Œç”Ÿæ•ˆã€‚çºŒç´„æœŸä»éœ€éµå®ˆæœ€é•·å…­å€‹æœˆçš„é™åˆ¶ã€‚
- **æœå‹™å®Œæˆç¢ºèª:** æœå‹™çµæŸæ™‚ï¼Œé›™æ–¹ï¼ˆä½¿ç”¨è€…èˆ‡ç…§è­·è€…ï¼‰éœ€åœ¨å¹³å°ç¢ºèªæœå‹™å®Œæˆã€‚
- **è©•åˆ†èˆ‡ç•™è¨€:** æœå‹™å®Œæˆç¢ºèªå¾Œï¼Œä½¿ç”¨è€…å¿…é ˆåœ¨æœŸé™å…§ï¼ˆä¾‹å¦‚ï¼š7 å¤©å…§ï¼‰å°ç…§è­·è€…é€²è¡Œæ˜Ÿç´šè©•åˆ† (1-5 æ˜Ÿ) å’Œæ–‡å­—ç•™è¨€ã€‚

### 4. ç³»çµ±åŠŸèƒ½ (System Features)

- **é€šçŸ¥ç³»çµ±:** åˆç´„ç‹€æ…‹è®Šæ›´ã€æ–°æœå‹™é‚€è«‹ã€è­‰ç…§å¯©æ ¸çµæœã€çºŒç´„æé†’ç­‰ã€‚
- **è³‡æ–™å®‰å…¨:** å¯†ç¢¼åŠ å¯†å„²å­˜ã€è³‡æ–™å‚³è¼¸ä½¿ç”¨ HTTPSã€‚

---

## ğŸ’¾ è³‡æ–™åº«è¨­è¨ˆ (Database Schema Design)
*ä»¥ä¸‹è¨­è¨ˆåŸºæ–¼ Golang é–‹ç™¼ä¸­å¸¸ç”¨çš„ SQL (ä¾‹å¦‚ PostgreSQL, MySQL) é—œä¿‚å‹è³‡æ–™åº«ã€‚*

### 1. `User` (ä½¿ç”¨è€…/å®¶å±¬ & ç…§è­·è€… - çµ±ä¸€ç”¨æˆ¶è¡¨)
| æ¬„ä½åç¨± (Field Name) | è³‡æ–™å‹æ…‹ (Data Type) | èªªæ˜ (Description) | å‚™è¨» (Notes) |
|---|---|---|---|
| `user_id` | UUID/INT | ä¸»éµ (Primary Key) | å¹³å°å”¯ä¸€ ID |
| `email` | VARCHAR(255) | ç™»å…¥ä¿¡ç®± | Unique |
| `password_hash` | VARCHAR(255) | å¯†ç¢¼é›œæ¹Šå€¼ | |
| `role` | VARCHAR(50) | è§’è‰² | 'user', 'caregiver', 'admin' |
| `is_active` | BOOLEAN | å¸³è™Ÿæ˜¯å¦å•Ÿç”¨ | |
| `created_at` | TIMESTAMP | å»ºç«‹æ™‚é–“ | |
| `updated_at` | TIMESTAMP | æ›´æ–°æ™‚é–“ | |

### 2. `CaregiverProfile` (ç…§è­·è€…æª”æ¡ˆ)
| æ¬„ä½åç¨± (Field Name) | è³‡æ–™å‹æ…‹ (Data Type) | èªªæ˜ (Description) | å‚™è¨» (Notes) |
|---|---|---|---|
| `profile_id` | UUID/INT | ä¸»éµ | |
| `user_id` | UUID/INT | å¤–éµ (Foreign Key) to `User` | |
| `full_name` | VARCHAR(100) | å§“å | |
| `gender` | VARCHAR(10) | æ€§åˆ¥ | |
| `phone` | VARCHAR(20) | è¯çµ¡é›»è©± | |
| `address` | TEXT | æœå‹™åœ°é»/å±…ä½åœ° | ç”¨æ–¼æœå°‹ |
| `bio` | TEXT | è‡ªæˆ‘ä»‹ç´¹/ç¶“é©— | |
| `avg_rating` | NUMERIC(2,1) | å¹³å‡åˆ†æ•¸ | ç³»çµ±è¨ˆç®—ï¼Œç¯„åœ 1.0 - 5.0 |
| `service_rate`| DECIMAL | åŸºæœ¬æ™‚è–ª/æ—¥è–ª | |

### 3. `License` (ç…§è­·è€…è­‰ç…§)
| æ¬„ä½åç¨± (Field Name) | è³‡æ–™å‹æ…‹ (Data Type) | èªªæ˜ (Description) | å‚™è¨» (Notes) |
|---|---|---|---|
| `license_id` | UUID/INT | ä¸»éµ | |
| `caregiver_id` | UUID/INT | å¤–éµ to `CaregiverProfile` | |
| `name` | VARCHAR(100) | è­‰ç…§åç¨± | |
| `issue_date` | DATE | ç™¼è­‰æ—¥æœŸ | |
| `expiry_date` | DATE | æœ‰æ•ˆæœŸé™ | |
| `status` | VARCHAR(50) | å¯©æ ¸ç‹€æ…‹ | 'pending', 'approved', 'rejected' |
| `proof_url` | VARCHAR(255) | è­‰æ˜æ–‡ä»¶å„²å­˜è·¯å¾‘ | |

### 4. `Availability` (ç…§è­·è€…å¯æœå‹™æ™‚é–“æ®µ)
| æ¬„ä½åç¨± (Field Name) | è³‡æ–™å‹æ…‹ (Data Type) | èªªæ˜ (Description) | å‚™è¨» (Notes) |
|---|---|---|---|
| `availability_id`| UUID/INT | ä¸»éµ | |
| `caregiver_id` | UUID/INT | å¤–éµ to `CaregiverProfile` | |
| `day_of_week` | INT | æ˜ŸæœŸå¹¾ | 1=Mon, 7=Sun |
| `start_time` | TIME | å¯æœå‹™é–‹å§‹æ™‚é–“ | |
| `end_time` | TIME | å¯æœå‹™çµæŸæ™‚é–“ | |

### 5. `Contract` (æœå‹™åˆç´„)
| æ¬„ä½åç¨± (Field Name) | è³‡æ–™å‹æ…‹ (Data Type) | èªªæ˜ (Description) | å‚™è¨» (Notes) |
|---|---|---|---|
| `contract_id` | UUID/INT | ä¸»éµ | |
| `user_id` | UUID/INT | å¤–éµ to `User` (ç™¼èµ·è€…/ä½¿ç”¨è€…) | |
| `caregiver_id`| UUID/INT | å¤–éµ to `User` (ç…§è­·è€…) | |
| `start_date` | DATE | åˆç´„é–‹å§‹æ—¥æœŸ | |
| `end_date` | DATE | åˆç´„çµæŸæ—¥æœŸ | æœ€é•· 6 å€‹æœˆ |
| `status` | VARCHAR(50) | åˆç´„ç‹€æ…‹ | 'pending', 'active', 'completed', 'canceled' |
| `is_renewal` | BOOLEAN | æ˜¯å¦ç‚ºçºŒç´„åˆç´„ | |
| `original_contract_id` | UUID/INT | è‡ªåƒè€ƒå¤–éµ (Self-referencing Foreign Key) | é€£çµåˆ°è¢«çºŒç´„çš„åˆç´„ ID |

### 6. `Review` (è©•åƒ¹èˆ‡ç•™è¨€)
| æ¬„ä½åç¨± (Field Name) | è³‡æ–™å‹æ…‹ (Data Type) | èªªæ˜ (Description) | å‚™è¨» (Notes) |
|---|---|---|---|
| `review_id` | UUID/INT | ä¸»éµ | |
| `contract_id` | UUID/INT | å¤–éµ to `Contract` | Unique (ä¸€å€‹åˆç´„åªèƒ½æœ‰ä¸€ä»½è©•åƒ¹) |
| `user_id` | UUID/INT | å¤–éµ to `User` (è©•åƒ¹è€…) | |
| `caregiver_id`| UUID/INT | å¤–éµ to `User` (è¢«è©•åƒ¹è€…) | |
| `rating` | INT | æ˜Ÿç´šè©•åˆ† | 1 - 5 |
| `comment` | TEXT | ç•™è¨€å…§å®¹ | |
| `created_at` | TIMESTAMP | è©•åƒ¹æ™‚é–“ | |

---

## ğŸ’» API æ¥å£è¨­è¨ˆ (API Endpoints Design)
*åŸºæ–¼ Golang å¸¸ç”¨çš„ RESTful API é¢¨æ ¼ï¼Œä¸¦å‡è¨­ä½¿ç”¨ JSON æ ¼å¼é€²è¡Œè³‡æ–™äº¤æ›ã€‚*

### 1. ç”¨æˆ¶èˆ‡èªè­‰ (Auth & User)
| å‹•ä½œ (Method) | è·¯å¾‘ (Path) | èªªæ˜ (Description) | èº«ä»½é©—è­‰ (Auth) |
|---|---|---|---|
| POST | `/api/v1/auth/register` | è¨»å†Šæ–°ç”¨æˆ¶/ç…§è­·è€… | Public |
| POST | `/api/v1/auth/login` | ç™»å…¥ | Public |
| GET | `/api/v1/users/{id}` | å–å¾—ä½¿ç”¨è€…åŸºæœ¬è³‡æ–™ | User/Caregiver/Admin |
| PUT | `/api/v1/users/{id}` | æ›´æ–°ä½¿ç”¨è€…åŸºæœ¬è³‡æ–™ | User/Caregiver |

### 2. ç…§è­·è€…æª”æ¡ˆèˆ‡æœå°‹ (Caregiver Profile & Search)
| å‹•ä½œ (Method) | è·¯å¾‘ (Path) | èªªæ˜ (Description) | èº«ä»½é©—è­‰ (Auth) |
|---|---|---|---|
| POST | `/api/v1/caregivers/profile` | å»ºç«‹ç…§è­·è€…æª”æ¡ˆ | Caregiver |
| PUT | `/api/v1/caregivers/profile` | æ›´æ–°ç…§è­·è€…æª”æ¡ˆ | Caregiver |
| GET | `/api/v1/caregivers/search` | æœå°‹/ç¯©é¸ç…§è­·è€… | User |
| GET | `/api/v1/caregivers/{id}` | å–å¾—å–®ä¸€ç…§è­·è€…æª”æ¡ˆ (å«è©•åƒ¹/è­‰ç…§) | User |
| POST | `/api/v1/caregivers/licenses` | ä¸Šå‚³æ–°è­‰ç…§ | Caregiver |
| PUT | `/api/v1/caregivers/availability` | æ›´æ–°å¯æœå‹™æ™‚é–“æ®µ (æ‰¹æ¬¡æ›´æ–°) | Caregiver |

> **GET `/api/v1/caregivers/search` ç¯„ä¾‹æŸ¥è©¢åƒæ•¸ (Query Params):**
> - `location`: åœ°é» (e.g., Taipei)
> - `service_type`: æœå‹™é¡å‹ (e.g., Home Care)
> - `start_date`: YYYY-MM-DD
> - `start_time`: HH:MM

### 3. åˆç´„ç®¡ç† (Contract Management)
| å‹•ä½œ (Method) | è·¯å¾‘ (Path) | èªªæ˜ (Description) | èº«ä»½é©—è­‰ (Auth) |
|---|---|---|---|
| POST | `/api/v1/contracts` | ç™¼èµ·æ–°åˆç´„é‚€è«‹ | User |
| GET | `/api/v1/contracts` | å–å¾—æˆ‘çš„æ‰€æœ‰åˆç´„ (ä½¿ç”¨è€…/ç…§è­·è€…) | User/Caregiver |
| GET | `/api/v1/contracts/{id}` | å–å¾—å–®ä¸€åˆç´„è©³æƒ… | User/Caregiver |
| PUT | `/api/v1/contracts/{id}/accept` | ç…§è­·è€…æ¥å—åˆç´„ | Caregiver |
| PUT | `/api/v1/contracts/{id}/complete` | æœå‹™å®Œæˆç¢ºèª | User/Caregiver |
| POST | `/api/v1/contracts/{id}/renew` | ç™¼èµ·çºŒç´„ | User |

### 4. è©•åƒ¹èˆ‡ç•™è¨€ (Review & Rating)
| å‹•ä½œ (Method) | è·¯å¾‘ (Path) | èªªæ˜ (Description) | èº«ä»½é©—è­‰ (Auth) |
|---|---|---|---|
| POST | `/api/v1/reviews` | æäº¤è©•åƒ¹èˆ‡ç•™è¨€ | User |
| GET | `/api/v1/reviews/caregivers/{id}` | å–å¾—æŸç…§è­·è€…çš„æ‰€æœ‰è©•åƒ¹ | Public |

---

## âš™ï¸ æŠ€è¡“æ¶æ§‹å»ºè­° (Technology Stack Recommendation)

### Golang å¾Œç«¯æ¶æ§‹
| é¡åˆ¥ (Category) | å»ºè­°æŠ€è¡“ (Recommended Tech) | èªªæ˜ (Notes) |
|---|---|---|
| ä¸»èªè¨€/æ¡†æ¶ | Golang | é«˜æ€§èƒ½ã€é«˜ä½µç™¼ã€å¿«é€Ÿå•Ÿå‹• |
| Web æ¡†æ¶ | Gin æˆ– Echo | è¼•é‡ã€é«˜æ•ˆèƒ½çš„ Web æ¡†æ¶ï¼Œé©åˆ RESTful API |
| è³‡æ–™åº«é©…å‹• | `lib/pq` (for PostgreSQL) æˆ– `go-sql-driver/mysql` | æ ¹æ“šé¸æ“‡çš„è³‡æ–™åº« |
| ORM/Query Builder | Gorm æˆ– SQLC | æ–¹ä¾¿æ“ä½œè³‡æ–™åº«ï¼Œæ¸›å°‘æ‰‹å¯« SQL éŒ¯èª¤ |
| èªè­‰/JWT | `dgrijalva/jwt-go` | è™•ç†ç”¨æˆ¶ç™»å…¥ç‹€æ…‹ |
| ç’°å¢ƒè®Šæ•¸ | `spf13/viper` | ç®¡ç†é…ç½®æª”å’Œç’°å¢ƒè®Šæ•¸ |
| åœ–ç‰‡å„²å­˜ | AWS S3 æˆ– Google Cloud Storage | å„²å­˜è­‰ç…§ç­‰åœ–ç‰‡æª”æ¡ˆï¼Œä¸å»ºè­°ç›´æ¥å­˜æ–¼ä¼ºæœå™¨ |
